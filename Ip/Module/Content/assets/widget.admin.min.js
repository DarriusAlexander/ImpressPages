function IpWidget_IpColumns(c){this.widgetObject=c;this.manageInit=b;this.prepareData=a;function b(){var d=this.widgetObject.data("ipWidget").data;if(d.baseId){this.widgetObject.find('input[name="baseId"]').val(d.baseId)}else{}}function a(){var d={};d.baseId=this.widgetObject.find('input[name="baseId"]').val();d.columns=this.widgetObject.find('input[name="columns"]').val();$(this.widgetObject).trigger("preparedWidgetData.ipWidget",[d])}}function IpWidget_IpFaq(c){this.widgetObject=c;this.manageInit=b;this.prepareData=a;function b(){var d=this.widgetObject.data("ipWidget");this.widgetObject.find("textarea").tinymce(ipTinyMceConfigMin)}function a(){var d=Object();d.answer=this.widgetObject.find(".ipAdminTextarea").html();d.question=this.widgetObject.find(".ipAdminInput").val();$(this.widgetObject).trigger("preparedWidgetData.ipWidget",[d])}}function IpWidget_IpFile(d){this.widgetObject=d;this.prepareData=b;this.manageInit=c;this.fileUploaded=e;this.addError=a;function c(){var h=this.widgetObject.data("ipWidget");var i=this.widgetObject.find(".ipaUpload");var g=new Object;i.ipUploadFile(g);var f=this.widgetObject.find(".ipWidget_ipFile_container");var g=new Object;if(h.data.files){g.files=h.data.files}else{g.files=new Array()}g.fileTemplate=this.widgetObject.find(".ipaFileTemplate");f.ipWidget_ipFile_container(g);this.widgetObject.bind("fileUploaded.ipUploadFile",this.fileUploaded);this.widgetObject.bind("error.ipUploadFile",this.addError);var j=this.widgetObject;this.widgetObject.find(".ipmBrowseButton").click(function(l){l.preventDefault();var k=new ipRepository({preview:"list"});k.bind("ipRepository.filesSelected",$.proxy(e,j))})}function a(g,f){$(this).trigger("error.ipContentManagement",[f])}function e(i,h){var j=$(this);var f=j.find(".ipWidget_ipFile_container");for(var g in h){f.ipWidget_ipFile_container("addFile",h[g].file,h[g].fileName,"new")}}function b(){var h=Object();var f=this.widgetObject.find(".ipWidget_ipFile_container");h.files=new Array();var g=f.ipWidget_ipFile_container("getFiles");g.each(function(j){var k=$(this);var i=new Object();i.title=k.ipWidget_ipFile_file("getTitle");i.fileName=k.ipWidget_ipFile_file("getFileName");i.status=k.ipWidget_ipFile_file("getStatus");h.files.push(i)});$(this.widgetObject).trigger("preparedWidgetData.ipWidget",[h])}}(function(b){var a={init:function(c){return this.each(function(){var g=b(this);var f=g.data("ipWidget_ipFile_container");var e=null;if(c.files){e=c.files}else{e=new Array()}if(!f){g.data("ipWidget_ipFile_container",{files:e,fileTemplate:c.fileTemplate});for(var d in e){g.ipWidget_ipFile_container("addFile",e[d]["fileName"],e[d]["title"],"present")}g.bind("removeFile.ipWidget_ipFile",function(j,i){var h=b(i);h.ipWidget_ipFile_container("removeFile",h)});b(".ipWidget_ipFile_container").sortable();b(".ipWidget_ipFile_container").sortable("option","handle",".ipaFileMove")}})},addFile:function(g,f,c){var e=this;var d=e.data("ipWidget_ipFile_container").fileTemplate.clone();d.ipWidget_ipFile_file({status:c,fileName:g,title:f});e.append(d)},removeFile:function(c){c.hide();c.ipWidget_ipFile_file("setStatus","deleted")},getFiles:function(){var c=this;return c.find(".ipaFileTemplate")}};b.fn.ipWidget_ipFile_container=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.ipAdminWidgetButton")}}}})(jQuery);(function(b){var a={init:function(c){return this.each(function(){var e=b(this);var d=e.data("ipWidget_ipFile_file");if(!d){var d={title:"",fileName:"",status:"new"};if(c.title){d.title=c.title}if(c.fileName){d.fileName=c.fileName}if(c.status){d.status=c.status}e.data("ipWidget_ipFile_file",{title:d.title,fileName:d.fileName,status:d.status});e.find(".ipaFileTitle").val(d.title)}e.find(".ipaFileLink").attr("href",ip.baseUrl+d.fileName);e.find(".ipaFileRemove").bind("click",function(f){f.preventDefault();e=b(this);e.trigger("removeClick.ipWidget_ipFile")});e.bind("removeClick.ipWidget_ipFile",function(f){e.trigger("removeFile.ipWidget_ipFile",this)});return e})},getTitle:function(){var c=this;return c.find(".ipaFileTitle").val()},getFileName:function(){var d=this;var c=d.data("ipWidget_ipFile_file");return c.fileName},getStatus:function(){var d=this;var c=d.data("ipWidget_ipFile_file");return c.status},setStatus:function(c){var e=b(this);var d=e.data("ipWidget_ipFile_file");d.status=c;e.data("ipWidget_ipFile_file",d)}};b.fn.ipWidget_ipFile_file=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.ipAdminWidgetButton")}}}})(jQuery);function IpWidget_IpForm(d){this.widgetObject=d;this.prepareData=a;this.manageInit=c;this.addField=b;function c(){var h=this.widgetObject.data("ipWidget");var e=this.widgetObject.find(".ipWidget_ipForm_container");var f=new Object;if(h.data.fields){f.fields=h.data.fields}else{f.fields=new Array()}f.fieldTemplate=this.widgetObject.find(".ipaFieldTemplate");f.optionsPopup=this.widgetObject.find(".ipaFieldOptionsPopup").ipWidget_ipForm_options({fieldTypes:h.data.fieldTypes});e.ipWidget_ipForm_container(f);this.widgetObject.find(".ipaFieldAdd").click(function(i){i.preventDefault();$(this).trigger("addFieldClicked.ipForm")});this.widgetObject.bind("addFieldClicked.ipForm",this.addField);var g=ipTinyMceConfigMin;g.height=100;this.widgetObject.find(".ipWidgetIpFormSuccess").tinymce(g)}function b(g){var f=$(this);var h=f.find(".ipWidget_ipForm_container");h.ipWidget_ipForm_container("addField")}function a(){var g=Object();var e=this.widgetObject.find(".ipWidget_ipForm_container");g.fields=new Array();var f=e.ipWidget_ipForm_container("getFields");f.each(function(j){var k=$(this);var i=new Object();i.label=k.ipWidget_ipForm_field("getLabel");i.type=k.ipWidget_ipForm_field("getType");i.options=k.ipWidget_ipForm_field("getOptions");if(k.ipWidget_ipForm_field("getRequired")){i.required=1}else{i.required=0}var h=k.ipWidget_ipForm_field("getStatus");if(h!="deleted"){g.fields.push(i)}});g.success=this.widgetObject.find(".ipWidgetIpFormSuccess").html();$(this.widgetObject).trigger("preparedWidgetData.ipWidget",[g])}}(function(b){var a={init:function(c){return this.each(function(){var g=b(this);var f=g.data("ipWidget_ipForm_container");var d=null;if(c.fields){d=c.fields}else{d=new Array()}if(!f){g.data("ipWidget_ipForm_container",{fields:d,fieldTemplate:c.fieldTemplate,optionsPopup:c.optionsPopup});if(!d instanceof Array){d=new Array()}for(var e in d){g.ipWidget_ipForm_container("addField",d[e])}g.sortable();g.sortable("option","handle",".ipaFieldMove")}})},addField:function(c){var f=this;if(typeof c!=="object"){c={}}var e=c;e.optionsPopup=f.data("ipWidget_ipForm_container").optionsPopup;var d=f.data("ipWidget_ipForm_container").fieldTemplate.clone();d.ipWidget_ipForm_field(e);f.append(d)},getFields:function(){var c=this;return c.find(".ipaFieldTemplate")}};b.fn.ipWidget_ipForm_container=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.ipAdminWidgetButton")}}}})(jQuery);(function(b){var a={init:function(c){if(typeof c!=="object"){c={}}return this.each(function(){var e=b(this);var d=e.data("ipWidget_ipForm_field");if(!d){var d={label:"",type:"IpText",required:false,status:"new",options:{}};if(c.label){d.label=c.label}if(c.type){d.type=c.type}if(c.required&&c.required!="0"&&c.required!="false"){d.required=1}else{d.required=0}if(c.status){d.status=c.status}e.data("ipWidget_ipForm_field",{label:d.label,type:d.type,required:d.required,status:d.status,optionsPopup:c.optionsPopup});e.find(".ipaFieldLabel").val(d.label);e.find(".ipaFieldType").val(d.type);e.find(".ipaFieldType").bind("change",function(){b(this).trigger("changeType.ipWidget_ipForm",[b(this).val()])});e.bind("changeType.ipWidget_ipForm",function(g,f){b(this).ipWidget_ipForm_field("setType",f)});b(this).ipWidget_ipForm_field("setType",d.type);if(c.options){e.ipWidget_ipForm_field("setOptions",c.options)}if(c.required&&c.required!=0){e.find(".ipaFieldRequired").attr("checked",c.required)}}$thisForEvent=e;e.find(".ipaFieldRemove").bind("click",function(f){$thisForEvent.ipWidget_ipForm_field("setStatus","deleted");$thisForEvent.hide();f.preventDefault()});return e})},openOptionsPopup:function(){$this=this;var c=$this.data("ipWidget_ipForm_field");$thisForEvent=$this;c.optionsPopup.bind("saveOptions.ipWidget_ipForm",function(f,d){$this=b(this);$this.unbind("saveOptions.ipWidget_ipForm");$thisForEvent.ipWidget_ipForm_field("setOptions",d)});c.optionsPopup.ipWidget_ipForm_options("showOptions",c.type,$this.ipWidget_ipForm_field("getOptions"))},setOptions:function(c){var e=this;var d=e.data("ipWidget_ipForm_field");if(!d.options){d.options={}}d.options[e.ipWidget_ipForm_field("getType")]=c;e.data("ipWidget_ipForm_field",d)},getOptions:function(){var d=b(this);var c=d.data("ipWidget_ipForm_field");if(c.options&&c.options[d.ipWidget_ipForm_field("getType")]){return c.options[d.ipWidget_ipForm_field("getType")]}else{return null}},getLabel:function(){var c=this;return c.find(".ipaFieldLabel").val()},getType:function(){var c=this;return c.find(".ipaFieldType").val()},setType:function(c){var e=this;var d=e.data("ipWidget_ipForm_field");if(d.optionsPopup.ipWidget_ipForm_options("optionsAvailable",c)){e.find(".ipaFieldOptions").css("visibility","visible");e.find(".ipaFieldOptions").bind("click",function(){b(this).trigger("optionsClick.ipWidget_ipForm");return false});e.bind("optionsClick.ipWidget_ipForm",function(){b(this).ipWidget_ipForm_field("openOptionsPopup")})}else{e.find(".ipaFieldOptions").css("visibility","hidden")}d.type=c;e.data("ipWidget_ipForm_field",d)},getStatus:function(){var d=this;var c=d.data("ipWidget_ipForm_field");return c.status},setStatus:function(c){var e=this;var d=e.data("ipWidget_ipForm_field");d.status=c;e.data("ipWidget_ipForm_field",d)},getRequired:function(){$this=b(this);return $this.find(".ipaFieldRequired").is(":checked")}};b.fn.ipWidget_ipForm_field=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.ipAdminWidgetButton")}}}})(jQuery);(function($){var methods={init:function(options){if(!options){options={}}return this.each(function(){var $this=$(this);var data=$this.data("ipWidget_ipForm_options");if(!data){var data={fieldTypes:options.fieldTypes};$this.data("ipWidget_ipForm_options",data)}return $this})},showOptions:function(fieldType,currentOptions){var $this=this;var fieldType=$this.ipWidget_ipForm_options("getFieldType",fieldType);$this.html(fieldType.optionsHtml);$this.dialog({modal:true,buttons:{Save:function(){var $this=$(this);eval("var options = "+fieldType.optionsSaveFunction+"($this);");$this.dialog("close");$this.trigger("saveOptions.ipWidget_ipForm",[options])},Cancel:function(){$(this).dialog("close")}}});eval(""+fieldType.optionsInitFunction+"($this, currentOptions);")},getFieldType:function(fieldType){var $this=this;var data=$this.data("ipWidget_ipForm_options");return data.fieldTypes[fieldType]},optionsAvailable:function(fieldTypeKey){var $this=this;var fieldType=$this.ipWidget_ipForm_options("getFieldType",fieldTypeKey);return(fieldType&&(fieldType.optionsInitFunction||fieldType.optionsHtml))}};$.fn.ipWidget_ipForm_options=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.ipAdminWidgetButton")}}}})(jQuery);function IpWidget_IpHtml(c){this.widgetObject=c;this.manageInit=b;this.prepareData=a;function b(){var d=this.widgetObject.data("ipWidget")}function a(){var d=Object();d.html=this.widgetObject.find("textarea").val();$(this.widgetObject).trigger("preparedWidgetData.ipWidget",[d])}}function IpWidget_IpImage(f,d){this.widgetObject=f;this.contentBody=d;this.prepareData=b;this.manageInit=e;this.addError=a;function e(){var i=this.widgetObject.data("ipWidget");var h=new Object;if(i.data.imageOriginal){h.image=i.data.imageOriginal}if(i.data.cropX1){h.cropX1=i.data.cropX1}if(i.data.cropY1){h.cropY1=i.data.cropY1}if(i.data.cropX2){h.cropX2=i.data.cropX2}if(i.data.cropY2){h.cropY2=i.data.cropY2}if(i.data.imageWindowWidth){h.windowWidth=i.data.imageWindowWidth}h.maxWindowWidth=this.contentBody.width();h.enableChangeHeight=true;h.enableChangeWidth=true;h.enableUnderscale=true;var g=this.widgetObject.find(".ipaImage");g.ipUploadImage(h);this.widgetObject.bind("error.ipUploadImage",{widgetController:this},this.addError)}function a(h,g){$(this).trigger("error.ipContentManagement",g)}function c(){this.widgetObject.find(".ipaErrorContainer .ipaError").remove()}function b(){var i=Object();var l=this.widgetObject.find(".ipaImage");if(l.ipUploadImage("getNewImageUploaded")){var k=l.ipUploadImage("getCurImage");if(k){i.newImage=k}}if(l.ipUploadImage("getCropCoordinatesChanged")&&l.ipUploadImage("getCurImage")!=false){var j=l.ipUploadImage("getCropCoordinates");if(j){i.cropX1=j.x1;i.cropY1=j.y1;i.cropX2=j.x2;i.cropY2=j.y2}}var g=l.ipUploadImage("getWindowWidth");var h=this.contentBody.width();i.maxWidth=this.widgetObject.width();i.scale=g/h;i.imageWindowWidth=g;i.title=this.widgetObject.find(".ipaImageTitle").val();$(this.widgetObject).trigger("preparedWidgetData.ipWidget",[i])}}function IpWidget_IpImageGallery(d){this.widgetObject=d;this.prepareData=b;this.manageInit=c;this.fileUploaded=e;this.addError=a;function c(){var h=this.widgetObject.data("ipWidget");this.widgetObject.find(".ipmBrowseButton").click(function(j){j.preventDefault();var i=new ipRepository({preview:"thumbnails",filter:"image"});i.bind("ipRepository.filesSelected",$.proxy(e,d))});var f=this.widgetObject.find(".ipWidget_ipImageGallery_container");var g=new Object;if(h.data.images){g.images=h.data.images}else{g.images=new Array()}g.smallImageWidth=this.widgetObject.find('input[name="smallImageWidth"]').val();g.smallImageHeight=this.widgetObject.find('input[name="smallImageHeight"]').val();g.imageTemplate=this.widgetObject.find(".ipaImageTemplate");f.ipWidget_ipImageGallery_container(g);this.widgetObject.bind("fileUploaded.ipUploadFile",this.fileUploaded);this.widgetObject.bind("error.ipUploadImage",{widgetController:this},this.addError);this.widgetObject.bind("error.ipUploadFile",{widgetController:this},this.addError)}function a(g,f){$(this).trigger("error.ipContentManagement",[f])}function e(i,h){var j=$(this);var f=j.find(".ipWidget_ipImageGallery_container");for(var g in h){f.ipWidget_ipImageGallery_container("addImage",h[g].file,"","new")}}function b(){var g=Object();var f=this.widgetObject.find(".ipWidget_ipImageGallery_container");g.images=new Array();$images=f.ipWidget_ipImageGallery_container("getImages");$images.each(function(j){var k=$(this);var i=new Object();i.title=k.ipWidget_ipImageGallery_image("getTitle");i.fileName=k.ipWidget_ipImageGallery_image("getFileName");i.status=k.ipWidget_ipImageGallery_image("getStatus");var h=k.ipWidget_ipImageGallery_image("getCropCoordinates");i.cropX1=h.x1;i.cropY1=h.y1;i.cropX2=h.x2;i.cropY2=h.y2;g.images.push(i)});$(this.widgetObject).trigger("preparedWidgetData.ipWidget",[g])}}(function(b){var a={init:function(c){return this.each(function(){var g=b(this);var f=g.data("ipWidget_ipImageGallery_container");var d=null;if(c.images){d=c.images}else{d=new Array()}if(!f){g.data("ipWidget_ipImageGallery_container",{images:d,imageTemplate:c.imageTemplate,smallImageWidth:c.smallImageWidth,smallImageHeight:c.smallImageHeight});for(var e in d){var h=new Object();h.cropX1=d[e]["cropX1"];h.cropY1=d[e]["cropY1"];h.cropX2=d[e]["cropX2"];h.cropY2=d[e]["cropY2"];g.ipWidget_ipImageGallery_container("addImage",d[e]["imageOriginal"],d[e]["title"],"present",h)}g.bind("removeImage.ipWidget_ipImageGallery",function(j,i){var k=b(i);k.ipWidget_ipImageGallery_container("removeImage",k)});b(".ipWidget_ipImageGallery_container").sortable();b(".ipWidget_ipImageGallery_container").sortable("option","handle",".ipaImageMove")}})},addImage:function(j,i,c,h){var g=this;var f=g.data("ipWidget_ipImageGallery_container");var d=g.data("ipWidget_ipImageGallery_container").imageTemplate.clone();d.ipWidget_ipImageGallery_image({smallImageWidth:f.smallImageWidth,smallImageHeight:f.smallImageHeight,status:c,fileName:j,title:i,coordinates:h});var e=g.find(".ipmBrowseButton");if(e.length>0){b(e).before(d)}else{g.append(d)}},removeImage:function(c){c.hide();c.ipWidget_ipImageGallery_image("setStatus","deleted")},getImages:function(){var c=this;return c.find(".ipaImageTemplate")}};b.fn.ipWidget_ipImageGallery_container=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.ipAdminWidgetButton")}}}})(jQuery);(function(b){var a={init:function(c){return this.each(function(){var h=b(this);var g=h.data("ipWidget_ipImageGallery_image");var d="new";if(c.status){d=c.status}if(!g){var g={title:"",fileName:"",status:d,smallImageWidth:c.smallImageWidth,smallImageHeight:c.smallImageHeight};if(c.title){g.title=c.title}if(c.fileName){g.fileName=c.fileName}if(c.status){g.status=c.status}h.data("ipWidget_ipImageGallery_image",{title:g.title,fileName:g.fileName,status:g.status});h.find(".ipaImageTitle").val(g.title)}var f=new Object;f.image=g.fileName;if(c.coordinates){f.cropX1=c.coordinates.cropX1;f.cropY1=c.coordinates.cropY1;f.cropX2=c.coordinates.cropX2;f.cropY2=c.coordinates.cropY2}var e=c.smallImageWidth/c.smallImageHeight;f.windowWidth=200;f.windowHeight=f.windowWidth/e;f.enableChangeWidth=false;f.enableChangeHeight=false;h.find(".ipaImage").ipUploadImage(f);h.find(".ipaImageRemove").bind("click",function(i){h=b(this);h.trigger("removeClick.ipWidget_ipImageGallery");return false});h.bind("removeClick.ipWidget_ipImageGallery",function(i){h.trigger("removeImage.ipWidget_ipImageGallery",this)});return h})},getTitle:function(){var c=this;return c.find(".ipaImageTitle").val()},getFileName:function(){var c=this;var d=c.find(".ipaImage").ipUploadImage("getCurImage");return d},getCropCoordinates:function(){var d=this;var e=d.find(".ipaImage");var c=e.ipUploadImage("getCropCoordinates");return c},getStatus:function(){var d=this;var c=d.data("ipWidget_ipImageGallery_image");if(c.status=="deleted"){return c.status}var e=d.find(".ipaImage");if(c.status=="new"||e.ipUploadImage("getNewImageUploaded")){return"new"}else{if(e.ipUploadImage("getCropCoordinatesChanged")&&e.ipUploadImage("getCurImage")!=false){return"coordinatesChanged"}}var c=d.data("ipWidget_ipImageGallery_image");return c.status},setStatus:function(c){var e=b(this);var d=e.data("ipWidget_ipImageGallery_image");d.status=c;e.data("ipWidget_ipImageGallery_image",d)}};b.fn.ipWidget_ipImageGallery_image=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.ipAdminWidgetButton")}}}})(jQuery);function IpWidget_IpLogoGallery(d){this.widgetObject=d;this.prepareData=b;this.manageInit=c;this.fileUploaded=e;this.addError=a;function c(){var h=this.widgetObject.data("ipWidget");this.widgetObject.find(".ipmBrowseButton").click(function(j){j.preventDefault();var i=new ipRepository({preview:"thumbnails",filter:"image"});i.bind("ipRepository.filesSelected",$.proxy(e,d))});var f=this.widgetObject.find(".ipWidget_ipLogoGallery_container");var g=new Object;if(h.data.logos){g.logos=h.data.logos}else{g.logos=new Array()}g.logoWidth=this.widgetObject.find('input[name="logoWidth"]').val();g.logoHeight=this.widgetObject.find('input[name="logoHeight"]').val();g.logoTemplate=this.widgetObject.find(".ipaLogoTemplate");f.ipWidget_ipLogoGallery_container(g);this.widgetObject.bind("fileUploaded.ipUploadFile",this.fileUploaded);this.widgetObject.bind("error.ipUploadImage",{widgetController:this},this.addError);this.widgetObject.bind("error.ipUploadFile",{widgetController:this},this.addError)}function a(g,f){$(this).trigger("error.ipContentManagement",[f])}function e(i,h){var j=$(this);var f=j.find(".ipWidget_ipLogoGallery_container");for(var g in h){f.ipWidget_ipLogoGallery_container("addLogo",h[g].file,"","")}}function b(){var g=Object();var f=this.widgetObject.find(".ipWidget_ipLogoGallery_container");g.logos=new Array();$logos=f.ipWidget_ipLogoGallery_container("getLogos");$logos.each(function(i){var k=$(this);var j=new Object();j.title=k.ipWidget_ipLogoGallery_logo("getTitle");j.link=k.ipWidget_ipLogoGallery_logo("getLink");j.fileName=k.ipWidget_ipLogoGallery_logo("getFileName");j.status=k.ipWidget_ipLogoGallery_logo("getStatus");var h=k.ipWidget_ipLogoGallery_logo("getCropCoordinates");j.cropX1=h.x1;j.cropY1=h.y1;j.cropX2=h.x2;j.cropY2=h.y2;g.logos.push(j)});$(this.widgetObject).trigger("preparedWidgetData.ipWidget",[g])}}(function(b){var a={init:function(c){return this.each(function(){var f=b(this);var e=f.data("ipWidget_ipLogoGallery_container");var h=null;if(c.logos){h=c.logos}else{h=new Array()}if(!e){f.data("ipWidget_ipLogoGallery_container",{logos:h,logoTemplate:c.logoTemplate,logoWidth:c.logoWidth,logoHeight:c.logoHeight});for(var d in h){var g=new Object();g.cropX1=h[d]["cropX1"];g.cropY1=h[d]["cropY1"];g.cropX2=h[d]["cropX2"];g.cropY2=h[d]["cropY2"];f.ipWidget_ipLogoGallery_container("addLogo",h[d]["logoOriginal"],h[d]["title"],h[d]["link"],"present",g)}f.bind("removeLogo.ipWidget_ipLogoGallery",function(k,j){var i=b(j);i.ipWidget_ipLogoGallery_container("removeLogo",i)});b(".ipWidget_ipLogoGallery_container").sortable();b(".ipWidget_ipLogoGallery_container").sortable("option","handle",".ipaLogoMove")}})},addLogo:function(d,j,i,e,k){var h=this;var f=h.data("ipWidget_ipLogoGallery_container");var g=h.data("ipWidget_ipLogoGallery_container").logoTemplate.clone();g.ipWidget_ipLogoGallery_logo({logoWidth:f.logoWidth,logoHeight:f.logoHeight,status:e,fileName:d,title:j,link:i,coordinates:k});var c=h.find(".ipmBrowseButton");if(c.length>0){b(c).before(g)}else{h.append(g)}},removeLogo:function(c){c.hide();c.ipWidget_ipLogoGallery_logo("setStatus","deleted")},getLogos:function(){var c=this;return c.find(".ipaLogoTemplate")}};b.fn.ipWidget_ipLogoGallery_container=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.ipAdminWidgetButton")}}}})(jQuery);(function(b){var a={init:function(c){return this.each(function(){var g=b(this);var f=g.data("ipWidget_ipLogoGallery_logo");var d="new";if(c.status){d=c.status}if(!f){var f={title:"",link:"",fileName:"",status:d,logoWidth:c.logoWidth,logoHeight:c.logoHeight};if(c.title){f.title=c.title}if(c.link){f.link=c.link}if(c.fileName){f.fileName=c.fileName}if(c.status){f.status=c.status}g.data("ipWidget_ipLogoGallery_logo",{title:f.title,link:f.link,fileName:f.fileName,status:f.status});g.find(".ipaLogoTitle").val(f.title)}var h=new Object;h.image=f.fileName;if(c.coordinates){h.cropX1=c.coordinates.cropX1;h.cropY1=c.coordinates.cropY1;h.cropX2=c.coordinates.cropX2;h.cropY2=c.coordinates.cropY2}var e=c.logoWidth/c.logoHeight;h.windowWidth=200;h.windowHeight=c.logoWidth/e;h.enableChangeWidth=false;h.enableChangeHeight=false;h.enableScale=false;h.enableFraming=false;h.enableUnderscale=true;h.autosizeType="fit";g.find(".ipaLogo").ipUploadImage(h);g.find(".ipaLogoRemove").bind("click",function(i){g=b(this);g.trigger("removeClick.ipWidget_ipLogoGallery");return false});g.find(".ipaLogoLink").bind("click",function(i){g=b(this);g.trigger("linkClick.ipWidget_ipLogoGallery");return false});g.bind("removeClick.ipWidget_ipLogoGallery",function(i){g.trigger("removeLogo.ipWidget_ipLogoGallery",this)});g.bind("linkClick.ipWidget_ipLogoGallery",function(j){g=b(this);var k=g.data("ipWidget_ipLogoGallery_logo");var i;i=prompt("Where this logo should link?",k.link);if(i!==null){k.link=i;g.data("ipWidget_ipLogoGallery_logo",k)}});return g})},getTitle:function(){var c=this;return c.find(".ipaLogoTitle").val()},getLink:function(){var c=this;return c.data("ipWidget_ipLogoGallery_logo").link},getFileName:function(){var c=this;var d=c.find(".ipaLogo").ipUploadImage("getCurImage");return d},getCropCoordinates:function(){var e=this;var d=e.find(".ipaLogo");var c=d.ipUploadImage("getCropCoordinates");return c},getStatus:function(){var e=this;var c=e.data("ipWidget_ipLogoGallery_logo");if(c.status=="deleted"){return c.status}var d=e.find(".ipaLogo");if(c.status=="new"||d.ipUploadImage("getNewImageUploaded")){return"new"}else{if(d.ipUploadImage("getCropCoordinatesChanged")&&d.ipUploadImage("getCurImage")!=false){return"coordinatesChanged"}}var c=e.data("ipWidget_ipLogoGallery_logo");return c.status},setStatus:function(c){var e=b(this);var d=e.data("ipWidget_ipLogoGallery_logo");d.status=c;e.data("ipWidget_ipLogoGallery_logo",d)}};b.fn.ipWidget_ipLogoGallery_logo=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.ipAdminWidgetButton")}}}})(jQuery);function IpWidget_IpTable(c){this.widgetObject=c;this.manageInit=b;this.prepareData=a;function b(){var d=this.widgetObject.data("ipWidget");this.widgetObject.find("textarea").tinymce(ipTinyMceConfigTable)}function a(){var d=Object();d.text=this.widgetObject.find("textarea").html();$(this.widgetObject).trigger("preparedWidgetData.ipWidget",[d])}}function IpWidget_IpText(c){this.widgetObject=c;this.manageInit=b;this.prepareData=a;function b(){var d=this.widgetObject.data("ipWidget");this.widgetObject.find("textarea").tinymce(ipTinyMceConfigMin)}function a(){var d=Object();d.text=this.widgetObject.find("textarea").html();$(this.widgetObject).trigger("preparedWidgetData.ipWidget",[d])}}function IpWidget_IpTextImage(d){this.widgetObject=d;this.prepareData=b;this.manageInit=c;this.addError=a;function c(){var f=this.widgetObject.data("ipWidget");var e=new Object;if(f.data.imageOriginal){e.image=f.data.imageOriginal}if(f.data.cropX1){e.cropX1=f.data.cropX1}if(f.data.cropY1){e.cropY1=f.data.cropY1}if(f.data.cropX2){e.cropX2=f.data.cropX2}if(f.data.cropY2){e.cropY2=f.data.cropY2}e.enableChangeHeight=true;e.enableChangeWidth=false;e.enableUnderscale=true;this.widgetObject.find(".ipaImage").ipUploadImage(e);this.widgetObject.bind("error.ipUploadImage",{widgetController:this},this.addError);this.widgetObject.find("textarea").tinymce(ipTinyMceConfigMin)}function b(){var e=Object();var h=this.widgetObject.find(".ipaImage");if(h.ipUploadImage("getNewImageUploaded")){var g=h.ipUploadImage("getCurImage");if(g){e.newImage=g}}if(h.ipUploadImage("getCropCoordinatesChanged")&&h.ipUploadImage("getCurImage")!=false){var f=h.ipUploadImage("getCropCoordinates");if(f){e.cropX1=f.x1;e.cropY1=f.y1;e.cropX2=f.x2;e.cropY2=f.y2}}e.text=$(this.widgetObject).find("textarea").first().val();e.title=$(this.widgetObject).find(".ipaImageTitle").first().val();$(this.widgetObject).trigger("preparedWidgetData.ipWidget",[e])}function a(f,e){$(this).trigger("error.ipContentManagement",e)}}function IpWidget_IpTitle(b){this.widgetObject=b;this.manageInit=function(){var c=this.widgetObject;c.find(".ipsTitleOptionsButton").on("click",function(d){c.find(".ipsTitleOptions").toggle();d.preventDefault();d.stopPropagation();return false});c.find(".ipsAnchor").on("keydown",$.proxy(a,this));c.find(".ipsAnchor").on("change",$.proxy(a,this));c.find(".ipsAnchor").on("keyup",$.proxy(a,this))};var a=function(){var d=this.widgetObject.find(".ipsAnchorPreview");var e=d.text();var c=e.split("#")[0]+"#"+this.widgetObject.find(".ipsAnchor").val();d.text(c)};this.prepareData=function(){var d=this.widgetObject.find(".ipaBody").find(":input");var c={};d.each(function(e){c[$(this).attr("name")]=$(this).val()});$(this.widgetObject).trigger("preparedWidgetData.ipWidget",[c])}};